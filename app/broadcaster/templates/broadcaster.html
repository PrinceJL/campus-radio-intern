<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CheerSL</title>
    <link
      rel="stylesheet"
      href="{{ url_for('broadcaster.static', filename='styles/broadcaster.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <!-- DEBUG: {{ url_for('broadcaster.static', filename='js/playlist-manager.js') }} -->
  </head>
  <body>
    <div class="main-header">
      <img src="slu_logo.png" alt="SLU Logo" class="header-logo" />
      CheerSL
    </div>
    <div class="app-grid">
      <!-- Left Sidebar -->
      <aside class="left-sidebar">
        <div class="box-header-devices">
          <div class="sidebar-header">Devices</div>
        </div>
        <div class="section-label">
          Cameras
          <span class="section-icons">
            <img src="plus.png" alt="Add" class="icon-btn-plus" />
            <img src="drop-down.png" alt="Dropdown" class="icon-btn" />
          </span>
        </div>
        <div class="camera-list"></div>
        <div class="section-label">Microphone</div>
        <div class="mic-list">
          <div class="mic-card">
            <span class="mic-icon"><img src="plus.png" alt="Add" class="icon-btn-plus" /></span>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <div class="box-header">
          <div class="stream-preview">Stream Preview</div>
        </div>
        <div class="stream-preview-wrapper">
          <div class="stream-bar"></div>
          <div id="stream-preview-area" class="stream-preview-area"></div>
        </div>
        <div class="controls-wrapper">
          <div class="controls">
            <button id="startStream" class="ctrl-btn">Start Stream</button>
            <button id="stopStream" class="ctrl-btn">Stop Stream</button>
            <button id="pauseStream" class="ctrl-btn">Pause Stream</button>
            <div id="broadcast-status" style="text-align: center; font-size: 0.95rem; color: #4ade80; margin: 8px auto;"></div>
          </div>
        </div>
        <div class="stream-manager">
          <div class="stream-manager-header">Stream Manager</div>
          <div class="stream-manager-title">Stream Title</div>
          <div class="stream-manager-content">
            <div class="stream-manager-desc">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a
              libero interdum, imperdiet ipsum non, sagittis ex. Praesent neque
              urna, condimentum quis aliquet id, scelerisque posuere ex. Donec
              venenatis ut justo euismod pharetra. Ut fringilla tortor quis quam
              malesuada, vitae finibus nibh sollicitudin. Aliquam habitant vitae
              neque quis pellentesque. Ut ex eros, condimentum eget porttitor
              ac, convallis non odio. Integer id nisi sit amet justo finibus
              euismod. Fusce imperdiet egestas viverra.
            </div>
            <div class="stream-manager-session">
              <div class="session-time">0:00:00</div>
              <div class="session">Session</div>
              <div class="viewers-count">0</div>
              <div class="viewers">Viewers</div>
            </div>
          </div>
        </div>
      </main>

      <!-- Right Section (Queue/Files) -->
      <div class="right-section">
        <!-- Queue/Playlist Panel -->
        <div class="queue-panel">
          <div class="box-header-queue">
            <div class="queue-tabs">
              <div class="queue-tab active">Queue</div>
              <div class="queue-tab">Recently played</div>
            </div>
          </div>  
          <div class="now-playing-block">
            <strong>Now Playing</strong>
            <div class="now-playing-content"></div>
            <!-- injected media block -->
            <div class="now-playing-controls">
              <button id="btnLoop" class="ctrl-btn-msc mode-btn">
                <img src="shuffle.png" alt="Shuffle" style="height:20px;width:20px;vertical-align:middle;" /></button>
              <button class="ctrl-btn-msc prev">
                <img src="previous.png" alt="Previous" style="height:15px;width:15px;vertical-align:middle;" />
              </button>
              <button class="ctrl-btn-msc pause">
                <img src="pause-button.png" alt="Pause" style="height:20px;width:20px;vertical-align:middle;" />
              </button>
              <button class="ctrl-btn-msc next">
                <img src="next-button.png" alt="Next" style="height:18px;width:18px;vertical-align:middle;" /></button>
              <button id="btnShuffle" class="ctrl-btn-msc mode-btn">
                <img src="loop.png" alt="Loop" style="height:20px;width:20px;vertical-align:middle;" />
              </button>
            </div>
          </div>

          <div class="next-up">
            <div class="playlist-header">
              <strong>Next from: (Playlist)</strong>
              <div class="playlist-actions">
                <button id="savePlaylistBtn" title="Save Playlist">
                  <img src="plus(2).png" alt="Add" class="icon-btn-plus" />
                </button>
                <button id="saveOrderBtn" title="Save Current Order">
                  <img src="diskette.png" alt="Save" class="icon-btn" />
                </button>
              </div>
            </div>
            <div class="playlist-items"></div>
          </div>

          <!-- Video Playlist -->
          <div class="section-label-playlist">
            Video Playlist
            <span class="section-icons">
              <img src="plus.png" alt="Add" class="icon-btn-plus" />
              <img src="drop-down.png" alt="Dropdown" class="icon-btn" />
            </span>
          </div>
          <div class="your-playlist">
            <div class="playlist-group"></div>
          </div>

        <!-- Files Panel -->
        <div class="files-panel">
          <div class="box-header-files">
            <div class="files-tab">Files</div>
          </div>

          <div class="media-files">
            <!-- Videos Section -->
            <div class="section-right">
              <div class="section-label-right">Videos <span class="plus">
                <img src="plus.png" alt="Add" class="icon-btn-plus" />
              </span></div>
              <div class="card-list">
                <div class="file-card" data-type="video">
                  <div class="file-container"></div>
                </div>
              </div>
            </div>
            <!-- Audio Section -->
            <div class="section-right">
              <div class="section-label-right">Videos <span class="plus" >
                <img src="plus.png" alt="Add" class="icon-btn-plus" />
              </span></div>
              <div class="card-list">
                <div class="file-card" data-type="audio">
                  <div class="file-container"></div>
                </div>
              </div>
            </div>

            <!-- Images Section -->
            <div class="section-right">
              <div class="section-label-right">Videos <span class="plus">
                <img src="plus.png" alt="Add" class="icon-btn-plus" />
              </span></div>
              <div class="card-list">
                <div class="file-card" data-type="image">
                  <div class="file-container"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script type="module" src="{{ url_for('broadcaster.static', filename='js/playlist-manager.js') }}"></script>
    <script type="module" src="{{ url_for('broadcaster.static', filename='js/file-handler.js') }}"></script>
    <script type="module" src="{{ url_for('broadcaster.static', filename='js/broadcaster.js') }}"></script>
  </body>
</html>
